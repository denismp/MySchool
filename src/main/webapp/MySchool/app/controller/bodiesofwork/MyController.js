/*
 * File: app/controller/bodiesofwork/MyController.js
 *
 * This file was generated by Sencha Architect version 3.0.1.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MySchool.controller.bodiesofwork.MyController', {
    extend: 'Ext.app.Controller',
    alias: 'controller.bodiesofworkcontroller',

    models: [
        'bodiesofwork.BodiesOfWorkModel'
    ],
    stores: [
        'bodiesofwork.MyJsonStore'
    ],
    views: [
        'bodiesofwork.BodyOfWorkForm',
        'bodiesofwork.GridPanel'
    ],

    refs: [
        {
            ref: 'BodyOfWorksForm',
            selector: 'bodyofworkform'
        }
    ],

    onBodiesofworkssubjectsgridViewReady: function(tablepanel, eOpts) {
        debugger;
        //grid.getSelectionModel().select( 0 );
        tablepanel.getSelectionModel().select( 0 );
    },

    onBodiesofworkssubjectsgridSelectionChange: function(model, selected, eOpts) {
        debugger;
        if ( Ext.isDefined( selected  ) ) {
            //var myFormView = this.getBodyOfWorksForm();
            this.getBodyOfWorksForm().getForm().loadRecord( selected[0] );
            console.log('onBodiesofworssubjectsgridSelectionChange()');
        }
    },

    onBodyofworkformBoxReady: function(component, width, height, eOpts) {
        debugger;
    },

    init: function(application) {
        this.control({
            "#bodiesofworkssubjectsgrid": {
                viewready: this.onBodiesofworkssubjectsgridViewReady,
                selectionchange: this.onBodiesofworkssubjectsgridSelectionChange
            },
            "#bodyofworkform": {
                boxready: this.onBodyofworkformBoxReady
            }
        });
    }

});
